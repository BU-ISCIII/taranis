name: tests ci
# This workflow runs the pipeline with the minimal test dataset to check 
# is completed without any errors
on:
    pull_request:
    push:

jobs:
  test_ci:
    name: Code testing
    runs-on: ubuntu-latest
    
    steps:
      - name: Check out pipeline code
        uses: actions/checkout@v4

      - name: Install dependencies
        run: $CONDA/bin/conda env update --file environment.yml --name base

      # - name: install python packages
      #   run: pip install -r requirements.txt

      - name: Install taranis
        run: pip install .

      - name: test analyze schema
        run: taranis analyze-schema -i  $script_dir/taranis/test/MLST_listeria -o analyze_schema_test  --cpus 1